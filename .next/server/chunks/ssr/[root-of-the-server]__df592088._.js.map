{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///home/user/sbspdmnds/src/lib/supabaseClient.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AACN,MAAM;AAEC,MAAM,WAAW,IAAA,uMAAY,EAAC,aAAa","debugId":null}},
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"sources":["file:///home/user/sbspdmnds/src/app/packages/actions.ts"],"sourcesContent":["'use server';\n\nimport { createClient } from '@supabase/supabase-js';\nimport { z } from 'zod';\n\n// --- CLIENTE SUPABASE (PÚBLICO) ---\nconst createSupabaseClient = () => {\n  const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\n  const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\n\n  if (!supabaseUrl || !supabaseAnonKey) {\n    throw new Error('Credenciais do Supabase não encontradas. Verifique as variáveis de ambiente.');\n  }\n  \n  return createClient(supabaseUrl, supabaseAnonKey);\n};\n\n// --- AÇÕES DE BUSCA DE DADOS ---\n\nexport async function getPublicPackages() {\n  try {\n    const supabase = createSupabaseClient();\n    const { data, error } = await supabase\n      .from('viagens')\n      .select('*')\n      .eq('ativo', true)\n      .order('destino', { ascending: true });\n\n    if (error) throw error;\n\n    return { packages: data };\n  } catch (error) {\n    console.error(\"Erro ao buscar pacotes públicos:\", error);\n    return { error: \"Não foi possível carregar os pacotes.\" };\n  }\n}\n\n\nexport async function getPublicPackageById(id: string) {\n  try {\n    const supabase = createSupabaseClient();\n\n    // Usando .limit(1) para contornar um possível bug no .single()\n    const { data, error } = await supabase\n      .from('viagens')\n      .select('*')\n      .eq('id', id)\n      .limit(1);\n\n    if (error) throw error;\n\n    if (!data || data.length === 0) {\n        return { pkg: null, error: `Pacote com ID ${id} não encontrado.` };\n    }\n\n    return { pkg: data[0] };\n\n  } catch (e) {\n    console.error(`Erro ao buscar pacote por ID ${id}:`, e);\n    return { pkg: null, error: \"Falha ao buscar dados do pacote.\" };\n  }\n}\n\n\n// --- AÇÕES DE FORMULÁRIO (MUTATIONS) ---\n\nconst ReservationSchema = z.object({\n  name: z.string().min(3, { message: 'O nome deve ter pelo menos 3 caracteres.' }),\n  email: z.string().email({ message: 'Por favor, insira um email válido.' }),\n});\n\nexport async function submitReservation(prevState: any, formData: FormData) {\n  try {\n    const validatedFields = ReservationSchema.safeParse({\n      name: formData.get('name'),\n      email: formData.get('email'),\n    });\n\n    if (!validatedFields.success) {\n      return {\n        message: 'Falha na validação. Por favor, verifique os campos.',\n        errors: validatedFields.error.flatten().fieldErrors,\n        success: false,\n      };\n    }\n\n    // Simulação de salvamento no banco de dados\n    await new Promise(resolve => setTimeout(resolve, 1000));\n    \n    return {\n      message: `Reserva confirmada para ${validatedFields.data.name}! Entraremos em contato em breve.`,\n      errors: { name: [], email: [] },\n      success: true,\n    };\n  } catch (e) {\n    console.error(\"Erro ao submeter reserva:\", e);\n    return {\n      message: 'Não foi possível processar a reserva.',\n      errors: { name: [], email: [] },\n      success: false,\n    };\n  }\n}\n"],"names":[],"mappings":";;;;;;;IAmBsB,oBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA","debugId":null}},
    {"offset": {"line": 89, "column": 0}, "map": {"version":3,"sources":["file:///home/user/sbspdmnds/src/app/home/page.tsx"],"sourcesContent":["'use client';\nimport { useRouter } from 'next/navigation';\nimport { supabase } from '../../lib/supabaseClient';\nimport { useEffect, useState, ReactNode } from 'react';\nimport { getPublicPackages } from '../packages/actions';\nimport Link from 'next/link';\nimport Image from 'next/image';\n\n// --- Tipagens ---\ntype Package = { id: string; [key: string]: any; };\ninterface UserProfile { id: string; nome_completo?: string; role?: string; }\n\n// --- Card de Navegação Principal ---\ninterface DashboardCardProps { title: string; description: string; icon: ReactNode; colorClass: string; href?: string; }\nconst DashboardCard = ({ title, description, icon, colorClass, href }: DashboardCardProps) => {\n  const router = useRouter();\n  const handleClick = () => { if (href) router.push(href); };\n  return (\n    <div onClick={handleClick} className={`bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 group ${href ? 'cursor-pointer' : ''}`}>\n      <div className={`w-16 h-16 rounded-full bg-gradient-to-br ${colorClass} flex items-center justify-center mb-5 shadow-lg group-hover:scale-110 transition-transform`}>{icon}</div>\n      <h3 className=\"text-2xl font-bold text-gray-800 mb-2\">{title}</h3>\n      <p className=\"text-gray-600\">{description}</p>\n    </div>\n  );\n};\n\n// --- Card da Vitrine de Pacotes (COM CORREÇÃO DE HOVER) ---\nconst PackageHighlightCard = ({ pkg, index }: { pkg: Package; index: number }) => {\n  const localImages = ['/imgs/rio_de_janeiro.jpg', '/imgs/salvador.jpg', '/imgs/amazonia.jpg'];\n  return (\n    // CORREÇÃO: A translação e o will-change ficam no Link (contêiner pai).\n    <Link href={`/packages/${pkg.id}`} className=\"block group rounded-xl transform hover:-translate-y-2 transition-all duration-300 will-change-transform\">\n      {/* O card em si tem o bg, a sombra e os cantos, mas o overflow fica em um filho. */}\n      <div className=\"bg-white h-full flex flex-col rounded-xl shadow-lg\">\n        {/* Este div tem os cantos arredondados e o overflow-hidden para conter o zoom da imagem. */}\n        <div className=\"relative h-56 rounded-t-xl overflow-hidden\">\n          <Image fill sizes=\"(max-width: 768px) 100vw, 33vw\" src={localImages[index % localImages.length]} alt={`Viagem para ${pkg.destino}`} className=\"object-cover group-hover:scale-110 transition-transform duration-500\" />\n          <div className=\"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent\"></div>\n          <div className=\"absolute bottom-4 left-4\">\n            <h3 className=\"text-2xl font-bold text-white\">{pkg.destino}</h3>\n            <p className=\"text-sm text-gray-200\">Saindo de {pkg.origem}</p>\n          </div>\n        </div>\n        <div className=\"p-6 flex flex-col flex-grow\">\n          <p className=\"text-gray-600 mb-4 line-clamp-2 flex-grow\">{pkg.descricao || `Descubra as maravilhas de ${pkg.destino}.`}</p>\n          <div className=\"text-right\">\n            <p className=\"text-sm text-gray-500\">A partir de</p>\n            <p className=\"text-2xl font-bold text-green-600\">{new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(pkg.preco)}</p>\n          </div>\n        </div>\n      </div>\n    </Link>\n  );\n};\n\n// --- Componente Principal da Página ---\nexport default function HomePage() {\n  const router = useRouter();\n  const [userProfile, setUserProfile] = useState<UserProfile | null>(null);\n  const [latestPackages, setLatestPackages] = useState<Package[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchInitialData = async () => {\n      setLoading(true);\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) { router.push('/login'); return; }\n\n      const [profileRes, roleRes, packagesRes] = await Promise.all([\n        supabase.from('usuarios').select('nome_completo').eq('id', user.id).maybeSingle(),\n        supabase.from('user_roles').select('role').eq('user_id', user.id).maybeSingle(),\n        getPublicPackages()\n      ]);\n\n      setUserProfile({ id: user.id, nome_completo: profileRes.data?.nome_completo, role: roleRes.data?.role || 'USER' });\n      if (packagesRes.packages) {\n        setLatestPackages(packagesRes.packages.slice(0, 3));\n      }\n      setLoading(false);\n    };\n    fetchInitialData();\n  }, [router]);\n\n  const handleLogout = async () => {\n    await supabase.auth.signOut();\n    router.push('/login');\n  };\n\n  return (\n    <div className=\"min-h-screen bg-slate-50 text-gray-800\">\n      <div className=\"relative h-96 text-white\">\n        <Image src=\"/imgs/capa_inicial.jpg\" alt=\"Paisagem de Viagem\" layout=\"fill\" objectFit=\"cover\" className=\"brightness-50\" />\n        <div className=\"absolute inset-0 flex flex-col justify-center items-center text-center p-4\">\n          <h1 className=\"text-5xl md:text-7xl font-extrabold shadow-2xl\">Sua Aventura Começa Aqui!</h1>\n          <p className=\"text-lg md:text-xl mt-4 max-w-3xl shadow-2xl\">Bem-vindo ao seu painel. Explore, sonhe e descubra seu próximo destino conosco.</p>\n        </div>\n        <header className=\"absolute top-0 left-0 right-0 bg-transparent\">\n          <nav className=\"container mx-auto px-6 py-4 flex justify-between items-center\">\n            <div className=\"flex items-center gap-3 cursor-pointer\" onClick={() => router.push('/home')}>\n              <img src=\"/imgs/travel_1000dp_FFF_FILL0_wght400_GRAD0_opsz48.svg\" alt=\"Jacarelli Viagens Logo\" className=\"h-8 w-8\" />\n              <span className=\"text-2xl font-bold\">Jacarelli Viagens</span>\n            </div>\n            <div className=\"flex items-center gap-4\">\n              <span className=\"font-medium hidden sm:block\">Olá, {userProfile?.nome_completo?.split(' ')[0] || 'Viajante'}!</span>\n              <button onClick={handleLogout} className=\"flex items-center gap-2 py-2 px-4 bg-red-500 text-white font-semibold rounded-lg shadow-md hover:bg-red-600 transition-all\">Sair</button>\n            </div>\n          </nav>\n        </header>\n      </div>\n\n      <main className=\"container mx-auto px-6 py-12 -mt-20\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-20\">\n          <DashboardCard title=\"Pacotes Imperdíveis\" description=\"Descubra nossas ofertas e planeje a viagem dos seus sonhos.\" colorClass=\"from-green-400 to-teal-500\" href=\"/packages\" icon={<svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-8 w-8 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4\" /></svg>} />\n          <DashboardCard title=\"Minhas Viagens\" description=\"Acesse seu histórico de compras, reservas e detalhes.\" colorClass=\"from-blue-400 to-indigo-500\" href=\"/my-trips\" icon={<svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-8 w-8 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01\" /></svg>} />\n          <DashboardCard title=\"Meu Perfil\" description=\"Atualize seus dados cadastrais, preferências e informações.\" colorClass=\"from-purple-400 to-pink-500\" href=\"/profile\" icon={<svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-8 w-8 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" /></svg>} />\n        </div>\n\n        <section>\n          <h2 className=\"text-4xl font-bold text-gray-800 mb-8 text-center\">Explore Nossos Destinos</h2>\n          {loading ? (\n            <p className=\"text-center text-gray-500\">Carregando as melhores viagens...</p>\n          ) : (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\n              {latestPackages.map((pkg, index) => <PackageHighlightCard key={pkg.id} pkg={pkg} index={index} />)}\n            </div>\n          )}\n        </section>\n\n        {userProfile?.role === 'ADMIN' && (\n          <div className=\"mt-12 bg-gray-800 text-white p-10 rounded-xl shadow-2xl text-left\">\n            <h2 className=\"text-4xl font-bold mb-4\">Área do Administrador</h2>\n            <p className=\"mb-6 opacity-80 max-w-2xl\">Acesso exclusivo para gerenciar usuários, cadastrar pacotes e visualizar relatórios.</p>\n            <button onClick={() => router.push('/admin')} className=\"py-3 px-8 bg-green-500 text-white font-bold rounded-lg shadow-lg hover:bg-green-600 transition-all\">Acessar Painel de Controle</button>\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AACA;AACA;AANA;;;;;;;;AAcA,MAAM,gBAAgB,CAAC,EAAE,KAAK,EAAE,WAAW,EAAE,IAAI,EAAE,UAAU,EAAE,IAAI,EAAsB;IACvF,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,cAAc;QAAQ,IAAI,MAAM,OAAO,IAAI,CAAC;IAAO;IACzD,qBACE,8OAAC;QAAI,SAAS;QAAa,WAAW,CAAC,wIAAwI,EAAE,OAAO,mBAAmB,IAAI;;0BAC7M,8OAAC;gBAAI,WAAW,CAAC,yCAAyC,EAAE,WAAW,2FAA2F,CAAC;0BAAG;;;;;;0BACtK,8OAAC;gBAAG,WAAU;0BAAyC;;;;;;0BACvD,8OAAC;gBAAE,WAAU;0BAAiB;;;;;;;;;;;;AAGpC;AAEA,6DAA6D;AAC7D,MAAM,uBAAuB,CAAC,EAAE,GAAG,EAAE,KAAK,EAAmC;IAC3E,MAAM,cAAc;QAAC;QAA4B;QAAsB;KAAqB;IAC5F,OACE,wEAAwE;kBACxE,8OAAC,uKAAI;QAAC,MAAM,CAAC,UAAU,EAAE,IAAI,EAAE,EAAE;QAAE,WAAU;kBAE3C,cAAA,8OAAC;YAAI,WAAU;;8BAEb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,wIAAK;4BAAC,IAAI;4BAAC,OAAM;4BAAiC,KAAK,WAAW,CAAC,QAAQ,YAAY,MAAM,CAAC;4BAAE,KAAK,CAAC,YAAY,EAAE,IAAI,OAAO,EAAE;4BAAE,WAAU;;;;;;sCAC9I,8OAAC;4BAAI,WAAU;;;;;;sCACf,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAG,WAAU;8CAAiC,IAAI,OAAO;;;;;;8CAC1D,8OAAC;oCAAE,WAAU;;wCAAwB;wCAAW,IAAI,MAAM;;;;;;;;;;;;;;;;;;;8BAG9D,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAE,WAAU;sCAA6C,IAAI,SAAS,IAAI,CAAC,0BAA0B,EAAE,IAAI,OAAO,CAAC,CAAC,CAAC;;;;;;sCACtH,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAE,WAAU;8CAAwB;;;;;;8CACrC,8OAAC;oCAAE,WAAU;8CAAqC,IAAI,KAAK,YAAY,CAAC,SAAS;wCAAE,OAAO;wCAAY,UAAU;oCAAM,GAAG,MAAM,CAAC,IAAI,KAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMrJ;AAGe,SAAS;IACtB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAqB;IACnE,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAY,EAAE;IAClE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,MAAM,mBAAmB;YACvB,WAAW;YACX,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,wIAAQ,CAAC,IAAI,CAAC,OAAO;YACtD,IAAI,CAAC,MAAM;gBAAE,OAAO,IAAI,CAAC;gBAAW;YAAQ;YAE5C,MAAM,CAAC,YAAY,SAAS,YAAY,GAAG,MAAM,QAAQ,GAAG,CAAC;gBAC3D,wIAAQ,CAAC,IAAI,CAAC,YAAY,MAAM,CAAC,iBAAiB,EAAE,CAAC,MAAM,KAAK,EAAE,EAAE,WAAW;gBAC/E,wIAAQ,CAAC,IAAI,CAAC,cAAc,MAAM,CAAC,QAAQ,EAAE,CAAC,WAAW,KAAK,EAAE,EAAE,WAAW;gBAC7E,IAAA,mLAAiB;aAClB;YAED,eAAe;gBAAE,IAAI,KAAK,EAAE;gBAAE,eAAe,WAAW,IAAI,EAAE;gBAAe,MAAM,QAAQ,IAAI,EAAE,QAAQ;YAAO;YAChH,IAAI,YAAY,QAAQ,EAAE;gBACxB,kBAAkB,YAAY,QAAQ,CAAC,KAAK,CAAC,GAAG;YAClD;YACA,WAAW;QACb;QACA;IACF,GAAG;QAAC;KAAO;IAEX,MAAM,eAAe;QACnB,MAAM,wIAAQ,CAAC,IAAI,CAAC,OAAO;QAC3B,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,wIAAK;wBAAC,KAAI;wBAAyB,KAAI;wBAAqB,QAAO;wBAAO,WAAU;wBAAQ,WAAU;;;;;;kCACvG,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;0CAAiD;;;;;;0CAC/D,8OAAC;gCAAE,WAAU;0CAA+C;;;;;;;;;;;;kCAE9D,8OAAC;wBAAO,WAAU;kCAChB,cAAA,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;oCAAyC,SAAS,IAAM,OAAO,IAAI,CAAC;;sDACjF,8OAAC;4CAAI,KAAI;4CAAyD,KAAI;4CAAyB,WAAU;;;;;;sDACzG,8OAAC;4CAAK,WAAU;sDAAqB;;;;;;;;;;;;8CAEvC,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAK,WAAU;;gDAA8B;gDAAM,aAAa,eAAe,MAAM,IAAI,CAAC,EAAE,IAAI;gDAAW;;;;;;;sDAC5G,8OAAC;4CAAO,SAAS;4CAAc,WAAU;sDAA6H;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAM9K,8OAAC;gBAAK,WAAU;;kCACd,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAc,OAAM;gCAAsB,aAAY;gCAA8D,YAAW;gCAA6B,MAAK;gCAAY,oBAAM,8OAAC;oCAAI,OAAM;oCAA6B,WAAU;oCAAqB,MAAK;oCAAO,SAAQ;oCAAY,QAAO;8CAAe,cAAA,8OAAC;wCAAK,eAAc;wCAAQ,gBAAe;wCAAQ,aAAa;wCAAG,GAAE;;;;;;;;;;;;;;;;0CACtX,8OAAC;gCAAc,OAAM;gCAAiB,aAAY;gCAAwD,YAAW;gCAA8B,MAAK;gCAAY,oBAAM,8OAAC;oCAAI,OAAM;oCAA6B,WAAU;oCAAqB,MAAK;oCAAO,SAAQ;oCAAY,QAAO;8CAAe,cAAA,8OAAC;wCAAK,eAAc;wCAAQ,gBAAe;wCAAQ,aAAa;wCAAG,GAAE;;;;;;;;;;;;;;;;0CAC5W,8OAAC;gCAAc,OAAM;gCAAa,aAAY;gCAA8D,YAAW;gCAA8B,MAAK;gCAAW,oBAAM,8OAAC;oCAAI,OAAM;oCAA6B,WAAU;oCAAqB,MAAK;oCAAO,SAAQ;oCAAY,QAAO;8CAAe,cAAA,8OAAC;wCAAK,eAAc;wCAAQ,gBAAe;wCAAQ,aAAa;wCAAG,GAAE;;;;;;;;;;;;;;;;;;;;;;kCAG/W,8OAAC;;0CACC,8OAAC;gCAAG,WAAU;0CAAoD;;;;;;4BACjE,wBACC,8OAAC;gCAAE,WAAU;0CAA4B;;;;;qDAEzC,8OAAC;gCAAI,WAAU;0CACZ,eAAe,GAAG,CAAC,CAAC,KAAK,sBAAU,8OAAC;wCAAkC,KAAK;wCAAK,OAAO;uCAAzB,IAAI,EAAE;;;;;;;;;;;;;;;;oBAK1E,aAAa,SAAS,yBACrB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;0CAA0B;;;;;;0CACxC,8OAAC;gCAAE,WAAU;0CAA4B;;;;;;0CACzC,8OAAC;gCAAO,SAAS,IAAM,OAAO,IAAI,CAAC;gCAAW,WAAU;0CAAqG;;;;;;;;;;;;;;;;;;;;;;;;AAMzK","debugId":null}}]
}